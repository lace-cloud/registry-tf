module:
  id: aws/ecs/task_definition
  name: ecs-task-definition
  system: aws
  version: 1.0.0
  description: "AWS ECS task definition for Fargate with container definitions, CPU/memory, and IAM roles"
  categories:
    - compute
    - containers
    - ecs
  authors:
    - name: "Lace Team"
      email: "team@lace.cloud"
  registry_visibility: public
  example: |
    module "task_definition" {
      source = "git::https://github.com/lace-cloud/registry-tf.git//modules/aws/ecs/task_definition?ref=v1.0.0"

      family             = "my-app"
      cpu                = 256
      memory             = 512
      execution_role_arn = "arn:aws:iam::123456789012:role/ecsTaskExecutionRole"
      task_role_arn      = "arn:aws:iam::123456789012:role/ecsTaskRole"

      container_definitions = jsonencode([
        {
          name      = "app"
          image     = "nginx:latest"
          essential = true
          portMappings = [
            {
              containerPort = 80
              protocol      = "tcp"
            }
          ]
        }
      ])

      tags = {
        Environment = "production"
      }
    }
